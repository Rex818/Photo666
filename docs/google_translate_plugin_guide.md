# Google翻译插件使用指南

## 概述

Google翻译插件是PyPhotoManager v1.3.0版本的新功能，用于将英文标签自动翻译成中文。插件使用免费的googletrans库，无需申请API密钥即可使用Google翻译服务。

## 功能特点

- **免费翻译**：使用免费的googletrans库，无需API密钥
- **实时翻译**：使用Google翻译服务进行高质量翻译
- **缓存机制**：翻译结果自动缓存，提高性能
- **降级处理**：翻译失败时自动使用内置翻译映射
- **用户控制**：可在界面中启用/禁用翻译功能
- **配置管理**：提供友好的配置界面

## 安装和配置

### 1. 安装依赖

插件使用googletrans-py库，通常已包含在项目依赖中。如果遇到问题，请运行：
```bash
pip install googletrans-py>=4.0.0
```

### 2. 配置插件

#### 方法一：通过菜单配置
1. 启动PyPhotoManager
2. 点击菜单栏：**工具** → **Google翻译插件配置**
3. 在弹出的配置对话框中：
   - 勾选"启用插件"
   - 选择源语言（默认：en）和目标语言（默认：zh-CN）
   - 点击"测试翻译"验证翻译功能
   - 点击"保存配置"

#### 方法二：通过标签管理器配置
1. 在6区标签管理面板中
2. 勾选"使用Google翻译插件"
3. 点击"配置"按钮
4. 按照上述步骤配置语言选项

#### 方法三：直接编辑配置文件
1. 打开文件：`config/plugins/google_translate_plugin.json`
2. 修改配置：
```json
{
    "name": "Google翻译插件",
    "version": "1.0.0",
    "description": "使用免费的googletrans库进行标签翻译",
    "author": "PicMan Team",
    "enabled": true,
    "config": {
        "source_language": "en",
        "target_language": "zh-CN"
    }
}
```

## 使用方法

### 1. 启用翻译功能
1. 确保插件已正确配置并启用
2. 在6区标签管理面板中勾选"使用Google翻译插件"
3. 选择一张照片，标签会自动翻译显示

### 2. 查看翻译结果
- **左侧**：显示英文标签（灰色背景）
- **右侧**：显示中文翻译（蓝色背景）
- **标签高亮**：当前照片使用的标签在标签列表中高亮显示

### 3. 翻译示例
```
英文标签                   中文翻译
portrait                  人像
landscape                 风景
nature                    自然
city                      城市
architecture              建筑
```

## 配置选项

### 基本配置
- **启用插件**：开启或关闭翻译功能
- **源语言**：要翻译的语言（默认：en）
- **目标语言**：翻译目标语言（默认：zh-CN）

### 支持的语言
- **源语言**：en, ja, ko, fr, de, es, ru
- **目标语言**：zh-CN, zh-TW, en, ja, ko

## 故障排除

### 1. 插件无法加载
**问题**：插件导入失败
**解决方案**：
- 检查插件文件是否存在：`plugins/google_translate_plugin.py`
- 确保Python路径配置正确
- 重启应用程序

### 2. 翻译功能失败
**问题**：测试翻译时出现错误
**解决方案**：
- 检查googletrans-py库是否正确安装
- 确认网络连接正常
- 检查防火墙设置
- 尝试重启应用程序

### 3. 翻译不工作
**问题**：勾选插件后标签没有翻译
**解决方案**：
- 确认插件已启用（配置文件中enabled: true）
- 检查googletrans-py库是否正确安装
- 查看日志文件了解详细错误信息
- 尝试重启应用程序

### 4. 降级到内置翻译
**问题**：显示使用内置翻译映射
**解决方案**：
- 这是正常现象，当Google翻译服务不可用时自动降级
- 内置翻译映射包含常用标签的翻译
- 如需使用Google翻译，请检查网络连接和googletrans-py库

## 费用说明

### 免费使用
- googletrans-py库完全免费
- 无需申请API密钥
- 无需付费
- 使用Google翻译的非官方接口

### 使用限制
- 可能有请求频率限制
- 建议合理使用，避免过于频繁的翻译请求
- 翻译结果会自动缓存，避免重复翻译

## 高级功能

### 1. 翻译缓存
- 翻译结果自动保存在内存中
- 相同标签不会重复请求API
- 提高翻译速度和降低成本

### 2. 错误处理
- API请求失败时自动降级
- 详细的错误日志记录
- 用户友好的错误提示

### 3. 批量翻译
- 支持批量标签翻译
- 优化API请求频率
- 提高翻译效率

## 技术细节

### 插件架构
```
plugins/google_translate_plugin.py    # 插件主文件
config/plugins/google_translate_plugin.json  # 配置文件
src/picman/gui/plugin_config_dialog.py      # 配置界面
```

### 翻译接口
- **库名称**：googletrans-py
- **版本要求**：>=4.0.0
- **支持语言**：Google翻译支持的所有语言
- **请求方式**：HTTP请求到Google翻译服务

### 集成方式
- 插件通过BasePlugin基类集成
- 支持动态加载和卸载
- 与主程序松耦合设计

## 更新日志

### v1.0.0 (2025-07-19)
- 初始版本发布
- 使用免费的googletrans-py库
- 实现翻译缓存机制
- 提供配置界面
- 支持降级处理
- 移除API密钥依赖

## 联系支持

如果您在使用过程中遇到问题，请：
1. 查看日志文件了解详细错误信息
2. 检查配置文件是否正确
3. 确认googletrans-py库已正确安装
4. 检查网络连接
5. 参考故障排除部分

## 许可证

Google翻译插件遵循与PyPhotoManager相同的许可证条款。 